<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <!-- css bootstrap 5 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />

  <style>
    body {
      height: 100vh;
      background-color: oklch(0.97 0.014 254.604);
    }

    main {
      height: 100%;
    }

    #card {
      height: fit-content;
      background-color: #fff;
      padding: 12px;
    }

    #btn-map {
      padding: 6px 6px;
    }

    #current_time {
      font-size: 1.25rem;
      color: gray;
    }

    .celcius {
      font-size: 4.5rem;
    }

    #description_weather {
      font-size: 30px;
      margin-bottom: 12px;
    }

    #status-weather {
      width: 100%;
    }

    #weather-section {
      gap: 24px;
    }

    #card-weather-days {
      height: fit-content;
      background-color: rgb(85, 150, 246);
    }

    #card-weather-days-nonactive {
      height: fit-content;
      color: oklch(0.556 0 0);
    }

    .card-body {
      padding: 24px;
    }

    #icons-weather {
      width: 40%;
    }

    .name-status-weather {
      color: gray;
      font-size: 1.25rem;
      margin-bottom: 7px;
    }

    .status-weather {
      color: black;
      font-size: 1.5rem;
      margin-bottom: 0;
    }

    .name-status-weather-days {
      font-size: 1.125rem;
      margin-bottom: 0;
    }

    .nswd-nonactive {
      color: oklch(0.709 0.01 56.259);
    }

    .status-weather-days {
      font-size: 1.25rem;
      margin-bottom: 0;
    }

    .nswd-active {
      color: oklch(0.923 0.003 48.717);
    }

    .swd-active {
      color: rgb(255, 255, 255);
    }

    @media screen and (min-width: 768px) {
      main {
        justify-content: center;
      }
      #weather-section {
        gap: 0;
      }
      #card {
        padding: 24px;
      }
    }

    @media screen and (min-width: 1024px) {
      #card {
        padding: 48px;
      }
    }
  </style>
  <body>
    <main class="container d-flex flex-column">
      <div id="card" class="rounded-3">
        <nav class="navbar navbar-expand mb-5">
          <form
            onsubmit="getWeather()"
            class="d-flex gap-2 fs-6 text text-nowrap align-items-center"
          >
            Search city
            <input
              type="text"
              class="form-control border-dark-subtle"
              name="city"
              id="search_City"
              value="Jakarta"
            />
            <button type="submit" style="display: none">hidden</button>
          </form>
        </nav>

        <div
          id="weather-section"
          class="row justify-content-center justify-content-md-between"
        >
          <div
            class="col-12 col-md-4 d-flex flex-column gap-3 justify-content-center align-items-center"
          >
            <p id="current_time">05:05 PM, Mon, Nov 23, 2020</p>
            <div
              id="icons-weather-today"
              class="d-flex justify-content-evenly align-items-center"
            >
              <img
                aria-hidden="true"
                id="current_icon_weather"
                src="..."
                alt="..."
                style="height: 160px"
              />
              <div class="d-flex">
                <h1 id="current_temperature_2m" class="celcius">72</h1>
                <h1>Â°C</h1>
              </div>
            </div>
            <h1 id="description_weather" class="fw-bold">Cloudy</h1>
            <span id="status-weather" class="d-flex justify-content-evenly">
              <div class="d-flex flex-column align-items-center">
                <p class="name-status-weather">Humidity</p>
                <p id="current_relative_humidity_2m" class="status-weather">
                  45%
                </p>
              </div>
              <div class="d-flex flex-column align-items-center">
                <p class="name-status-weather">Wind speed</p>
                <p id="current_wind_speed_10m" class="status-weather">
                  19.2 km/h
                </p>
              </div>
            </span>
          </div>

          <!-- card -->
          <div class="col-12 col-md-8 row">
            <!-- card 1 -->
            <div
              id="card-weather-days"
              class="card col-6 col-sm-4 col-md-3 col-xl-3 border-0 text-light"
            >
              <div class="card-body d-flex flex-column align-items-center">
                <h5
                  class="daily_day"
                  class="card-title fs-5 fw-bold"
                  style="margin-bottom: 0"
                ></h5>

                <img
                  aria-hidden="true"
                  class="daily_icon_weather"
                  src="..."
                  alt="..."
                  style="width: 70%"
                />

                <div class="card-text d-flex flex-column align-items-center">
                  <p class="name-status-weather-days nswd-active">
                    Temperature
                  </p>
                  <span class="d-flex gap-2">
                    <p
                      id="daily_temperature_2m_max"
                      class="status-weather-days swd-active"
                    >
                      30%
                    </p>
                    <p
                      id="daily_temperature_2m_min"
                      class="status-weather-days swd-active"
                    >
                      30%
                    </p>
                  </span>
                </div>
              </div>
            </div>

            <!-- card 2 -->
            <div
              id="card-weather-days-nonactive"
              class="card col-6 col-sm-4 col-md-3 col-xl-3 border-0"
            >
              <div class="card-body d-flex flex-column align-items-center">
                <h5
                  class="daily_day"
                  class="card-title fs-5 fw-bold"
                  style="margin-bottom: 0"
                ></h5>

                <img
                  aria-hidden="true"
                  class="daily_icon_weather"
                  src="..."
                  alt="..."
                  style="width: 70%"
                />

                <div class="card-text d-flex flex-column align-items-center">
                  <p class="name-status-weather-days nswd-nonactive">
                    Temperature
                  </p>
                  <span class="d-flex gap-2">
                    <p
                      id="daily_temperature_2m_max"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                    <p
                      id="daily_temperature_2m_min"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                  </span>
                </div>
              </div>
            </div>

            <!-- card 3 -->
            <div
              id="card-weather-days-nonactive"
              class="card col-6 col-sm-4 col-md-3 col-xl-3 border-0"
            >
              <div class="card-body d-flex flex-column align-items-center">
                <h5
                  class="daily_day"
                  class="card-title fs-5 fw-bold"
                  style="margin-bottom: 0"
                ></h5>

                <img
                  aria-hidden="true"
                  class="daily_icon_weather"
                  src="..."
                  alt="..."
                  style="width: 70%"
                />

                <div class="card-text d-flex flex-column align-items-center">
                  <p class="name-status-weather-days nswd-nonactive">
                    Temperature
                  </p>
                  <span class="d-flex gap-2">
                    <p
                      id="daily_temperature_2m_max"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                    <p
                      id="daily_temperature_2m_min"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                  </span>
                </div>
              </div>
            </div>

            <!-- card 4 -->
            <div
              id="card-weather-days-nonactive"
              class="card col-6 col-sm-4 col-md-3 col-xl-3 border-0"
            >
              <div class="card-body d-flex flex-column align-items-center">
                <h5
                  class="daily_day"
                  class="card-title fs-5 fw-bold"
                  style="margin-bottom: 0"
                ></h5>

                <img
                  aria-hidden="true"
                  class="daily_icon_weather"
                  src="..."
                  alt="..."
                  style="width: 70%"
                />

                <div class="card-text d-flex flex-column align-items-center">
                  <p class="name-status-weather-days nswd-nonactive">
                    Temperature
                  </p>
                  <span class="d-flex gap-2">
                    <p
                      id="daily_temperature_2m_max"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                    <p
                      id="daily_temperature_2m_min"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                  </span>
                </div>
              </div>
            </div>

            <!-- card 5 -->
            <div
              id="card-weather-days-nonactive"
              class="card col-6 col-sm-4 col-md-3 col-xl-3 border-0"
            >
              <div class="card-body d-flex flex-column align-items-center">
                <h5
                  class="daily_day"
                  class="card-title fs-5 fw-bold"
                  style="margin-bottom: 0"
                ></h5>

                <img
                  aria-hidden="true"
                  class="daily_icon_weather"
                  src="..."
                  alt="..."
                  style="width: 70%"
                />

                <div class="card-text d-flex flex-column align-items-center">
                  <p class="name-status-weather-days nswd-nonactive">
                    Temperature
                  </p>
                  <span class="d-flex gap-2">
                    <p
                      id="daily_temperature_2m_max"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                    <p
                      id="daily_temperature_2m_min"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                  </span>
                </div>
              </div>
            </div>

            <!-- card 6 -->
            <div
              id="card-weather-days-nonactive"
              class="card col-6 col-sm-4 col-md-3 col-xl-3 border-0"
            >
              <div class="card-body d-flex flex-column align-items-center">
                <h5
                  class="daily_day"
                  class="card-title fs-5 fw-bold"
                  style="margin-bottom: 0"
                ></h5>

                <img
                  aria-hidden="true"
                  class="daily_icon_weather"
                  src="..."
                  alt="..."
                  style="width: 70%"
                />

                <div class="card-text d-flex flex-column align-items-center">
                  <p class="name-status-weather-days nswd-nonactive">
                    Temperature
                  </p>
                  <span class="d-flex gap-2">
                    <p
                      id="daily_temperature_2m_max"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                    <p
                      id="daily_temperature_2m_min"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                  </span>
                </div>
              </div>
            </div>

            <!-- card 7 -->
            <div
              id="card-weather-days-nonactive"
              class="card col-6 col-sm-4 col-md-3 col-xl-3 border-0"
            >
              <div class="card-body d-flex flex-column align-items-center">
                <h5
                  class="daily_day"
                  class="card-title fs-5 fw-bold"
                  style="margin-bottom: 0"
                ></h5>

                <img
                  aria-hidden="true"
                  class="daily_icon_weather"
                  src="..."
                  alt="..."
                  style="width: 70%"
                />

                <div class="card-text d-flex flex-column align-items-center">
                  <p class="name-status-weather-days nswd-nonactive">
                    Temperature
                  </p>
                  <span class="d-flex gap-2">
                    <p
                      id="daily_temperature_2m_max"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                    <p
                      id="daily_temperature_2m_min"
                      class="status-weather-days"
                    >
                      30%
                    </p>
                  </span>
                </div>
              </div>
            </div>
          </div>
          <!-- end card -->
        </div>
      </div>
    </main>

    <!-- script bootstrap 5 -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>

    <!-- icons weather code -->
    <script src="descriptions.js"></script>

    <!-- script code -->
    <script>
      const search_City = document.getElementById("search_City");

      // Get DOM for current day
      const current_time = document.getElementById("current_time");
      const current_icon_weather = document.getElementById(
        "current_icon_weather"
      );
      const current_temperature_2m = document.getElementById(
        "current_temperature_2m"
      );
      const description_weather = document.getElementById(
        "description_weather"
      );
      const current_relative_humidity_2m = document.getElementById(
        "current_relative_humidity_2m"
      );
      const current_wind_speed_10m = document.getElementById(
        "current_wind_speed_10m"
      );

      // Get DOM for daily
      const daily_day = document.querySelectorAll(".daily_day");
      const daily_icon_weather = document.querySelectorAll(
        ".daily_icon_weather"
      );
      const daily_temperature_2m_max = document.querySelectorAll(
        "daily_temperature_2m_max"
      );
      const daily_temperature_2m_min = document.querySelectorAll(
        "daily_temperature_2m_min"
      );

      async function getWeather() {
        event.preventDefault();
        const nameCity = search_City.value;

        const getCityUrl = `https://geocoding-api.open-meteo.com/v1/search?name=${nameCity}&count=1&language=en&format=json`;

        try {
          const response_Geocoding = await fetch(getCityUrl);
          if (!response_Geocoding.ok) {
            console.error(error);
          }

          const dataCity = await response_Geocoding.json();
          const getWeatherUrl = `https://api.open-meteo.com/v1/forecast?latitude=${dataCity.results[0].latitude}&longitude=${dataCity.results[0].longitude}&daily=weather_code,temperature_2m_max,temperature_2m_min&current=temperature_2m,wind_speed_10m,relative_humidity_2m,weather_code`;
          console.log(dataCity.results[0]);

          const response_Weather_Forecast = await fetch(getWeatherUrl);
          const dataWeather = await response_Weather_Forecast.json();

          console.log(dataWeather);
          console.log(icons_weather);
        } catch (error) {
          console.error(error);
        }
      }

      // getWeather("Jakarta");

      // function test() {
      //   event.preventDefault();
      //   const nameCity = search_City.value;
      //   console.log("berhasil",nameCity);
      // }
    </script>
  </body>
</html>
